// Prisma Schema for DATASPRINT 2K26

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// User model for Team Registration & Auth
model User {
  id           String    @id @default(uuid())
  username     String    @unique // e.g. prefix@datasprint
  password     String
  teamName     String
  
  // Team Lead (Main account holder)
  name         String    // Lead Full Name
  email        String    @unique // Lead Email
  phone        String
  college      String
  dept         String
  year         String
  
  // Member 1
  m1Name       String
  m1Phone      String
  m1Email      String
  m1College    String
  m1Dept       String
  m1Year       String
  
  // Member 2
  m2Name       String
  m2Phone      String
  m2Email      String
  m2College    String
  m2Dept       String
  m2Year       String
  
  // Member 3
  m3Name       String
  m3Phone      String
  m3Email      String
  m3College    String
  m3Dept       String
  m3Year       String

  role         String    @default("member")
  otp          String?
  otpExpiresAt DateTime?
  isVerified   Boolean   @default(false)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@map("users")
}

// Example model - customize based on your needs
model Post {
  id        String   @id @default(uuid())
  title     String
  content   String?
  published Boolean  @default(false)
  authorId  String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("posts")
}
// RegistrationOTP model for pre-registration verification
model RegistrationOTP {
  id        String   @id @default(uuid())
  email     String   @unique
  otp       String
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@map("registration_otps")
}
